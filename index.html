<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>polymtr</title>
  <link href="css/styles.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
</head>
<body>
  <div id="guide"></div>

  <!-- Nav shows on smaller screens -->
  <div class="nav sm-show">
    <div id="kick-nav" class="nav-button nav-active" data-target="#kick">
        Kick
    </div>
    <div id="hats-nav" class="nav-button nav-inactive" data-target="#hats">
        Hats
    </div>
    <div id="snare-naav" class="nav-button nav-inactive" data-target="#snare">
        Snare
    </div>
    <div id="perc-nav" class="nav-button nav-inactive" data-target="#perc">
        Perc
    </div>
  </div>


  <!-- Oscilloscope background -->
  <div id="oscilloscope"></div>


  <!-- Global controls panel -->
  <div id="global-controls">
    <div id="global-ctrl" class="global-module flex-even mx-auto">
      <div>        
        <div id="power" class="mx-auto"></div>
        <label>power</label>
      </div>
      <div class="sm-hide md-hide">
        <div id="latency" class="mx-auto"></div>
        <label>latency settings</label>
      </div>
      <div>
        <div id="bpm" class="mx-auto"></div>
        <label>tempo</label>
      </div>
      <div class="flex-center my-auto sm-hide">
        <div id="global-random" class="mx-auto"></div>
        <label class="my-auto ml">randomize all</label>
      </div>
    </div>
  </div>
  <br>


  <!-- Compressor + Reverb rack -->
  <div id="effects-rack" class="sm-hide">
    <div id="fx" class="flex mx-auto">

      <!-- Compressor UI -->
      <div id="compressor" class="module mx-auto my-auto md-hide">
        <div class="module-label">compressor</div>
        <div class="flex-around">
          <div>
            <div id="comp-thresh" class="mx-auto"></div>
            <label>threshold</label>
          </div>
          <div>
            <div id="comp-ratio" class="mx-auto"></div>
            <label>ratio</label>
          </div>
          <div class="my-auto">
            <div id="comp-attack" class="mx-auto"></div>
            <label>attack</label>
          </div>
          <div class="my-auto">
            <div id="comp-release" class="mx-auto"></div>
            <label>release</label>
          </div>      
          <div class="my-auto">
            <div id="comp-knee" class="mx-auto"></div>
            <label>knee</label>
          </div>
        </div>
      </div>
      <br class="md-hide">

      <!-- Reverb UI -->
      <div id="reverb" class="module mx-auto tiny-hide">
        <div class="module-label">reverb</div>
        <div id="reverb-container" class="flex-around">
          <!-- Decay Knob -->
          <div id="verb-decay">
            <div class="my-auto">
              <div id="roomSize" class="mx-auto"></div>
              <div>decay</div>
            </div>
          </div>
          <!-- EQ Group -->
          <div id="verb-eq" class="flex-around">
            <div class="my-auto mx-auto">
              <div id="verb-low" class="mx-auto"></div>
              <div>low</div>
            </div>
            <div class="my-auto mx-auto">
              <div id="verb-mid" class="mx-auto"></div>
              <div>mid</div>
            </div>
            <div class="my-auto mx-auto">
              <div id="verb-high" class="mx-auto"></div>
              <div>high</div>
            </div>
          </div>
          <!-- Channel Sends -->
          <div id="verb-sends" class="flex-even my-auto">
            <div class="my-auto">
              <div id="kick-send" class="mx-auto"></div>
              <div>kick</div>
            </div>
            <div class="my-auto">
              <div id="hats-send" class="mx-auto"></div>
              <div>hats</div>
            </div>
            <div class="my-auto">
              <div id="snare-send" class="mx-auto"></div>
              <div>snare</div>
            </div>
            <div class="my-auto">
              <div id="perc-send" class="mx-auto"></div>
              <div>perc</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br class="md-hide">


  <!-- Instrument Channels -->
  <div class="container mx-auto">

  <!-- Kick (Channel 1) -->
    <div id="kick" class="channel module">
      <div class="channel-label">kick</div>
      <!-- Kick envelope -->
      <div class="envelope">
        <div class="flex-center">
          <div id="kick-attack" class="cc0"></div>
          <div id="kick-env" class="my-auto env-display"></div>
          <div id="kick-release" class="cc1"></div>
        </div>
        <div class="center env-label">
          <img src="img/left-arrow-up.svg" width="15"> 
          attack &nbsp; decay 
          <img src="img/right-arrow.svg" width="15">
        </div>
      </div>
      <svg class="divider first-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 50 1440 607">
        <path fill="#0099ff" fill-opacity="1" d="M0,224L18.5,197.3C36.9,171,74,117,111,106.7C147.7,96,185,128,222,165.3C258.5,203,295,245,332,250.7C369.2,256,406,224,443,181.3C480,139,517,85,554,58.7C590.8,32,628,32,665,58.7C701.5,85,738,139,775,160C812.3,181,849,171,886,144C923.1,117,960,75,997,96C1033.8,117,1071,203,1108,208C1144.6,213,1182,139,1218,128C1255.4,117,1292,171,1329,197.3C1366.2,224,1403,224,1422,224L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
        <path class="flipped" fill="#0099ff" fill-opacity="1" d="M0,224L18.5,197.3C36.9,171,74,117,111,106.7C147.7,96,185,128,222,165.3C258.5,203,295,245,332,250.7C369.2,256,406,224,443,181.3C480,139,517,85,554,58.7C590.8,32,628,32,665,58.7C701.5,85,738,139,775,160C812.3,181,849,171,886,144C923.1,117,960,75,997,96C1033.8,117,1071,203,1108,208C1144.6,213,1182,139,1218,128C1255.4,117,1292,171,1329,197.3C1366.2,224,1403,224,1422,224L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
      </svg>
      <!-- Kick Timbre Controls -->
      <div class="flex-around first-row">
        <div class="center" style="width:33%">
          <div id="kick-freq" class="mx-auto"></div>
          <label>ƒreq</label>
        </div>
        <div class="center" style="width:33%">
          <div id="kick-detune" class="mx-auto"></div>
          <label class="smaller">detune</label>
        </div>
        <div class="center" style="width:33%">
          <div id="kick-dist" class="mx-auto"></div>
          <label>dist</label>
        </div>
      </div>
      <div class="flex-around">
        <div class="center" style="width:33%">
          <div id="kick-cutoff" class="mx-auto"></div>
          <label>subƒ</label>
        </div>
        <div class="center" style="width:33%">
          <div id="kick-res" class="mx-auto"></div>
          <label style="white-space:nowrap">sub vol</label>
        </div>
        <div class="center" style="width:33%">
          <div id="kick-oct" class="mx-auto"></div>
          <label>FM</label>
        </div>
      </div>
      <svg class="divider second-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 20 1440 607">
        <path  d="M0,224L18.5,186.7C36.9,149,74,75,111,90.7C147.7,107,185,213,222,213.3C258.5,213,295,107,332,80C369.2,53,406,107,443,128C480,149,517,139,554,138.7C590.8,139,628,149,665,154.7C701.5,160,738,160,775,186.7C812.3,213,849,267,886,277.3C923.1,288,960,256,997,218.7C1033.8,181,1071,139,1108,144C1144.6,149,1182,203,1218,240C1255.4,277,1292,299,1329,277.3C1366.2,256,1403,192,1422,160L1440,128L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
        <path class="flipped" d="M0,224L18.5,186.7C36.9,149,74,75,111,90.7C147.7,107,185,213,222,213.3C258.5,213,295,107,332,80C369.2,53,406,107,443,128C480,149,517,139,554,138.7C590.8,139,628,149,665,154.7C701.5,160,738,160,775,186.7C812.3,213,849,267,886,277.3C923.1,288,960,256,997,218.7C1033.8,181,1071,139,1108,144C1144.6,149,1182,203,1218,240C1255.4,277,1292,299,1329,277.3C1366.2,256,1403,192,1422,160L1440,128L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
      </svg>
      <!-- Kick Pattern Controls -->
      <div class="step-control center">
        <input id="kick-length" type="number" value="16" min="3" max="32">
        <label>seq length</label>
      </div>
      <div class="left-label flex">
        <img class="left-arrow" src="img/left-arrow.svg">
        <div class="left-text">pattern density</div>
      </div>
      <div class="patt-wrap flex-around">
        <div id="kick-thresh"></div>
          <div class="patt-container">
            <div id="kick-patt" class="absolute"></div>
            <svg class="pattern-overlay" height="100" width="130">
              <rect id="kick-line" class="one" height="50" width="130" x="0" y="0" />
              <rect id="kick-line2" class="two" height="25" width="130" x="0" y="0" />
              <rect id="kick-line3" class="three" height="50" width="130" x="0" y="50" />
            </svg>
          </div>  
        <div id="kick-accent"></div>
      </div>
      <div class="right-label">
        <label>accent density <img src="img/right-arrow.svg" width="15"></label>
      </div>
      <div class="flex-center">
        <div id="kick-rand" class="my-auto"></div>
        <div class="random-label smaller">randomize pattern</div>
      </div>
      <svg class="divider third-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 80 1440 607">
        <path d="M0,128L7.7,122.7C15.5,117,31,107,46,133.3C61.9,160,77,224,93,245.3C108.4,267,124,245,139,240C154.8,235,170,245,186,229.3C201.3,213,217,171,232,160C247.7,149,263,171,279,154.7C294.2,139,310,85,325,90.7C340.6,96,356,160,372,176C387.1,192,403,160,418,165.3C433.5,171,449,213,465,240C480,267,495,277,511,272C526.5,267,542,245,557,224C572.9,203,588,181,604,170.7C619.4,160,635,160,650,149.3C665.8,139,681,117,697,117.3C712.3,117,728,139,743,176C758.7,213,774,267,790,282.7C805.2,299,821,277,836,229.3C851.6,181,867,107,883,112C898.1,117,914,203,929,245.3C944.5,288,960,288,975,245.3C991,203,1006,117,1022,117.3C1037.4,117,1053,203,1068,240C1083.9,277,1099,267,1115,234.7C1130.3,203,1146,149,1161,117.3C1176.8,85,1192,75,1208,80C1223.2,85,1239,107,1254,149.3C1269.7,192,1285,256,1301,277.3C1316.1,299,1332,277,1347,277.3C1362.6,277,1378,299,1394,272C1409,245,1425,171,1432,133.3L1440,96L1440,320L1432.3,320C1424.5,320,1409,320,1394,320C1378.1,320,1363,320,1347,320C1331.6,320,1316,320,1301,320C1285.2,320,1270,320,1254,320C1238.7,320,1223,320,1208,320C1192.3,320,1177,320,1161,320C1145.8,320,1130,320,1115,320C1099.4,320,1084,320,1068,320C1052.9,320,1037,320,1022,320C1006.5,320,991,320,975,320C960,320,945,320,929,320C913.5,320,898,320,883,320C867.1,320,852,320,836,320C820.6,320,805,320,790,320C774.2,320,759,320,743,320C727.7,320,712,320,697,320C681.3,320,666,320,650,320C634.8,320,619,320,604,320C588.4,320,573,320,557,320C541.9,320,526,320,511,320C495.5,320,480,320,465,320C449,320,434,320,418,320C402.6,320,387,320,372,320C356.1,320,341,320,325,320C309.7,320,294,320,279,320C263.2,320,248,320,232,320C216.8,320,201,320,186,320C170.3,320,155,320,139,320C123.9,320,108,320,93,320C77.4,320,62,320,46,320C31,320,15,320,8,320L0,320Z"></path>
        <path class="flipped" d="M0,128L7.7,122.7C15.5,117,31,107,46,133.3C61.9,160,77,224,93,245.3C108.4,267,124,245,139,240C154.8,235,170,245,186,229.3C201.3,213,217,171,232,160C247.7,149,263,171,279,154.7C294.2,139,310,85,325,90.7C340.6,96,356,160,372,176C387.1,192,403,160,418,165.3C433.5,171,449,213,465,240C480,267,495,277,511,272C526.5,267,542,245,557,224C572.9,203,588,181,604,170.7C619.4,160,635,160,650,149.3C665.8,139,681,117,697,117.3C712.3,117,728,139,743,176C758.7,213,774,267,790,282.7C805.2,299,821,277,836,229.3C851.6,181,867,107,883,112C898.1,117,914,203,929,245.3C944.5,288,960,288,975,245.3C991,203,1006,117,1022,117.3C1037.4,117,1053,203,1068,240C1083.9,277,1099,267,1115,234.7C1130.3,203,1146,149,1161,117.3C1176.8,85,1192,75,1208,80C1223.2,85,1239,107,1254,149.3C1269.7,192,1285,256,1301,277.3C1316.1,299,1332,277,1347,277.3C1362.6,277,1378,299,1394,272C1409,245,1425,171,1432,133.3L1440,96L1440,320L1432.3,320C1424.5,320,1409,320,1394,320C1378.1,320,1363,320,1347,320C1331.6,320,1316,320,1301,320C1285.2,320,1270,320,1254,320C1238.7,320,1223,320,1208,320C1192.3,320,1177,320,1161,320C1145.8,320,1130,320,1115,320C1099.4,320,1084,320,1068,320C1052.9,320,1037,320,1022,320C1006.5,320,991,320,975,320C960,320,945,320,929,320C913.5,320,898,320,883,320C867.1,320,852,320,836,320C820.6,320,805,320,790,320C774.2,320,759,320,743,320C727.7,320,712,320,697,320C681.3,320,666,320,650,320C634.8,320,619,320,604,320C588.4,320,573,320,557,320C541.9,320,526,320,511,320C495.5,320,480,320,465,320C449,320,434,320,418,320C402.6,320,387,320,372,320C356.1,320,341,320,325,320C309.7,320,294,320,279,320C263.2,320,248,320,232,320C216.8,320,201,320,186,320C170.3,320,155,320,139,320C123.9,320,108,320,93,320C77.4,320,62,320,46,320C31,320,15,320,8,320L0,320Z"></path>
      </svg>
      
      <!-- Kick Volume -->
      <div id="kick-vol"></div>
      <div class="center">volume</div>
    </div>


  <!-- Hats (Channel 2) -->
    <div id="hats" class="channel module sm-hide">
      <div class="channel-label">hats</div>
      <!-- Hats envelope -->
      <div class="envelope">
        <div class="flex-center">
          <div id="hats-attack" class="cc2"></div>
          <div id="hats-env" class="my-auto env-display"></div>
          <div id="hats-release" class="cc3"></div>
        </div>
        <div class="center env-label">
          <img src="img/left-arrow-up.svg" width="15"> 
          attack &nbsp; decay 
          <img src="img/right-arrow.svg" width="15">
        </div>
      </div>
      <svg class="divider first-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 607">
        <path d="M0,224L18.5,240C36.9,256,74,288,111,282.7C147.7,277,185,235,222,192C258.5,149,295,107,332,106.7C369.2,107,406,149,443,160C480,171,517,149,554,154.7C590.8,160,628,192,665,192C701.5,192,738,160,775,154.7C812.3,149,849,171,886,181.3C923.1,192,960,192,997,202.7C1033.8,213,1071,235,1108,208C1144.6,181,1182,107,1218,112C1255.4,117,1292,203,1329,240C1366.2,277,1403,267,1422,261.3L1440,256L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
        <path class="flipped" d="M0,224L18.5,240C36.9,256,74,288,111,282.7C147.7,277,185,235,222,192C258.5,149,295,107,332,106.7C369.2,107,406,149,443,160C480,171,517,149,554,154.7C590.8,160,628,192,665,192C701.5,192,738,160,775,154.7C812.3,149,849,171,886,181.3C923.1,192,960,192,997,202.7C1033.8,213,1071,235,1108,208C1144.6,181,1182,107,1218,112C1255.4,117,1292,203,1329,240C1366.2,277,1403,267,1422,261.3L1440,256L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
      </svg>      
            <!-- Hats Timbre Controls -->
      <div class="flex-around first-row">
        <div class="center" style="width:33%">
          <div id="hats-freq" class="mx-auto"></div>
          <div>ƒreq</div>
        </div>
        <div class="center" style="width:33%">
          <div id="hats-detune" class="mx-auto"></div>
          <div class="smaller">detune</div>
        </div>
        <div class="center" style="width:33%">
          <div id="hats-harm" class="mx-auto"></div>
          <div>harmon</div>
        </div>
      </div>
      <div class="flex-around">
        <div class="center" style="width:50%">
          <div id="hats-delaytime" class="mx-auto"></div>
          <div>delay time</div>
        </div>
        <div class="center" style="width:50%">
          <div id="hats-delaywet" class="mx-auto"></div>
          <div>delay vol</div>
        </div>
      </div>
      <svg class="divider second-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 80 1440 603">
        <path d="M0,128L18.5,117.3C36.9,107,74,85,111,96C147.7,107,185,149,222,186.7C258.5,224,295,256,332,224C369.2,192,406,96,443,74.7C480,53,517,107,554,112C590.8,117,628,75,665,96C701.5,117,738,203,775,213.3C812.3,224,849,160,886,122.7C923.1,85,960,75,997,106.7C1033.8,139,1071,213,1108,208C1144.6,203,1182,117,1218,69.3C1255.4,21,1292,11,1329,26.7C1366.2,43,1403,85,1422,106.7L1440,128L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
        <path class="flipped" d="M0,128L18.5,117.3C36.9,107,74,85,111,96C147.7,107,185,149,222,186.7C258.5,224,295,256,332,224C369.2,192,406,96,443,74.7C480,53,517,107,554,112C590.8,117,628,75,665,96C701.5,117,738,203,775,213.3C812.3,224,849,160,886,122.7C923.1,85,960,75,997,106.7C1033.8,139,1071,213,1108,208C1144.6,203,1182,117,1218,69.3C1255.4,21,1292,11,1329,26.7C1366.2,43,1403,85,1422,106.7L1440,128L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
      </svg>
      <!-- Hats Pattern Controls -->
      <div class="step-control center">
        <input id="hats-length" type="number" value="28" min="3" max="32">
        <label>seq length</label>
      </div>
      <div class="left-label flex">
        <img class="left-arrow" src="img/left-arrow.svg">
        <div class="left-text">pattern density</div>
      </div>
      <div class="patt-wrap flex-around">
        <div id="hats-thresh"></div>
        <div class="patt-container">
          <div id="hats-patt" class="absolute"></div>
          <svg class="pattern-overlay" height="100" width="130">
            <rect id="hats-line" class="one" height="66" width="130" x="0" y="0"/>
            <rect id="hats-line2" class="two" height="33" width="130" x="0" y="0"/>
            <rect id="hats-line3" class="three" height="34" width="130" x="0" y="66"/>
          </svg>
        </div>
        <div id="hats-accent"></div>
      </div>
      <div class="right-label">
        <label>accent density <img src="img/right-arrow.svg" width="15"></label>
      </div>
      <div class="flex-center">
        <div id="hats-rand" class="my-auto"></div>
        <div class="random-label smaller">randomize pattern</div>
      </div>
      <svg class="divider third-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 60 1440 607">
        <path d="M0,32L18.5,58.7C36.9,85,74,139,111,160C147.7,181,185,171,222,144C258.5,117,295,75,332,74.7C369.2,75,406,117,443,133.3C480,149,517,139,554,112C590.8,85,628,43,665,58.7C701.5,75,738,149,775,181.3C812.3,213,849,203,886,176C923.1,149,960,107,997,112C1033.8,117,1071,171,1108,186.7C1144.6,203,1182,181,1218,170.7C1255.4,160,1292,160,1329,165.3C1366.2,171,1403,181,1422,186.7L1440,192L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
        <path class="flipped" d="M0,32L18.5,58.7C36.9,85,74,139,111,160C147.7,181,185,171,222,144C258.5,117,295,75,332,74.7C369.2,75,406,117,443,133.3C480,149,517,139,554,112C590.8,85,628,43,665,58.7C701.5,75,738,149,775,181.3C812.3,213,849,203,886,176C923.1,149,960,107,997,112C1033.8,117,1071,171,1108,186.7C1144.6,203,1182,181,1218,170.7C1255.4,160,1292,160,1329,165.3C1366.2,171,1403,181,1422,186.7L1440,192L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
      </svg>            
      <!-- Hats Volume -->
      <div id="hats-vol"></div>
      <div class="center">volume</div>
    </div>

  <!-- Snare (Channel 3) -->
    <div id="snare" class="channel module sm-hide">
      <div class="channel-label">snare</div>
      <!-- Snare envelope -->
      <div class="envelope center">
        <div class="flex-center">
          <div id="snare-attack" class="cc4"></div>
          <div id="snare-env" class="my-auto env-display"></div>
          <div id="snare-release" class="cc5"></div>
        </div>
        <div class="center env-label">
          <img src="img/left-arrow-up.svg" width="15">
          attack &nbsp; decay 
          <img src="img/right-arrow.svg" width="15">
        </div>
      </div>
      <svg class="divider first-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 20 1440 607">
        <path d="M0,32L16,53.3C32,75,64,117,96,112C128,107,160,53,192,53.3C224,53,256,107,288,122.7C320,139,352,117,384,133.3C416,149,448,203,480,224C512,245,544,235,576,202.7C608,171,640,117,672,101.3C704,85,736,107,768,117.3C800,128,832,128,864,117.3C896,107,928,85,960,85.3C992,85,1024,107,1056,144C1088,181,1120,235,1152,213.3C1184,192,1216,96,1248,85.3C1280,75,1312,149,1344,181.3C1376,213,1408,203,1424,197.3L1440,192L1440,320L1424,320C1408,320,1376,320,1344,320C1312,320,1280,320,1248,320C1216,320,1184,320,1152,320C1120,320,1088,320,1056,320C1024,320,992,320,960,320C928,320,896,320,864,320C832,320,800,320,768,320C736,320,704,320,672,320C640,320,608,320,576,320C544,320,512,320,480,320C448,320,416,320,384,320C352,320,320,320,288,320C256,320,224,320,192,320C160,320,128,320,96,320C64,320,32,320,16,320L0,320Z"></path>
        <path class="flipped" d="M0,32L16,53.3C32,75,64,117,96,112C128,107,160,53,192,53.3C224,53,256,107,288,122.7C320,139,352,117,384,133.3C416,149,448,203,480,224C512,245,544,235,576,202.7C608,171,640,117,672,101.3C704,85,736,107,768,117.3C800,128,832,128,864,117.3C896,107,928,85,960,85.3C992,85,1024,107,1056,144C1088,181,1120,235,1152,213.3C1184,192,1216,96,1248,85.3C1280,75,1312,149,1344,181.3C1376,213,1408,203,1424,197.3L1440,192L1440,320L1424,320C1408,320,1376,320,1344,320C1312,320,1280,320,1248,320C1216,320,1184,320,1152,320C1120,320,1088,320,1056,320C1024,320,992,320,960,320C928,320,896,320,864,320C832,320,800,320,768,320C736,320,704,320,672,320C640,320,608,320,576,320C544,320,512,320,480,320C448,320,416,320,384,320C352,320,320,320,288,320C256,320,224,320,192,320C160,320,128,320,96,320C64,320,32,320,16,320L0,320Z"></path>
      </svg>
      <!-- Snare Timbre Controls -->
      <div class="snare-buttons">
        <div id="snare-noise" class="mx-auto"></div>
        <div class="center">noise type</div>
      </div>
      <div id="snare-filt" class="flex-around">
        <div class="center" style="width:50%">
          <div id="snare-cutoff" class="mx-auto"></div>
          <div>cutoff</div>
        </div>
        <div style="width:50%">
          <div id="snare-res" class="mx-auto"></div>
          <div class="center">resonance</div>
        </div>
      </div>
      <svg class="divider second-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 80 1440 607">
        <path d="M0,64L16,101.3C32,139,64,213,96,202.7C128,192,160,96,192,96C224,96,256,192,288,213.3C320,235,352,181,384,138.7C416,96,448,64,480,74.7C512,85,544,139,576,170.7C608,203,640,213,672,208C704,203,736,181,768,186.7C800,192,832,224,864,234.7C896,245,928,235,960,197.3C992,160,1024,96,1056,101.3C1088,107,1120,181,1152,186.7C1184,192,1216,128,1248,112C1280,96,1312,128,1344,144C1376,160,1408,160,1424,160L1440,160L1440,320L1424,320C1408,320,1376,320,1344,320C1312,320,1280,320,1248,320C1216,320,1184,320,1152,320C1120,320,1088,320,1056,320C1024,320,992,320,960,320C928,320,896,320,864,320C832,320,800,320,768,320C736,320,704,320,672,320C640,320,608,320,576,320C544,320,512,320,480,320C448,320,416,320,384,320C352,320,320,320,288,320C256,320,224,320,192,320C160,320,128,320,96,320C64,320,32,320,16,320L0,320Z"></path>
        <path class="flipped" d="M0,64L16,101.3C32,139,64,213,96,202.7C128,192,160,96,192,96C224,96,256,192,288,213.3C320,235,352,181,384,138.7C416,96,448,64,480,74.7C512,85,544,139,576,170.7C608,203,640,213,672,208C704,203,736,181,768,186.7C800,192,832,224,864,234.7C896,245,928,235,960,197.3C992,160,1024,96,1056,101.3C1088,107,1120,181,1152,186.7C1184,192,1216,128,1248,112C1280,96,1312,128,1344,144C1376,160,1408,160,1424,160L1440,160L1440,320L1424,320C1408,320,1376,320,1344,320C1312,320,1280,320,1248,320C1216,320,1184,320,1152,320C1120,320,1088,320,1056,320C1024,320,992,320,960,320C928,320,896,320,864,320C832,320,800,320,768,320C736,320,704,320,672,320C640,320,608,320,576,320C544,320,512,320,480,320C448,320,416,320,384,320C352,320,320,320,288,320C256,320,224,320,192,320C160,320,128,320,96,320C64,320,32,320,16,320L0,320Z"></path>
      </svg>      
      <!-- Snare Pattern Controls -->
      <div class="step-control center">
        <input id="snare-length" type="number" value="24" min="3" max="32">
        <label>seq length</label>
      </div>
      <div class="left-label flex">
        <img class="left-arrow" src="img/left-arrow.svg">
        <div class="left-text">pattern density</div>
      </div>
      <div class="patt-wrap flex-around">
        <div id="snare-thresh"></div>
        <div class="patt-container">
          <div id="snare-patt" class="absolute"></div>
          <svg class="pattern-overlay" height="100" width="130">
            <rect id="snare-line" class="one" height="87.5" width="130" x="0" y="0"/>
            <rect id="snare-line2" class="two" height="12.5" width="130" x="0" y="0"/>
            <rect id="snare-line3" class="three" height="12.5" width="130" x="0" y="87.5"/>
          </svg>
        </div>
        <div id="snare-accent"></div>
      </div>
      <div class="right-label">
        <label>accent density <img src="img/right-arrow.svg" width="15"></label>
      </div>
      <div class="flex-center">
        <div id="snare-rand" class="my-auto"></div>
        <div class="random-label smaller">randomize pattern</div>
      </div>
      <svg class="divider third-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 50 1440 607">
        <path d="M0,224L18.5,197.3C36.9,171,74,117,111,106.7C147.7,96,185,128,222,165.3C258.5,203,295,245,332,250.7C369.2,256,406,224,443,181.3C480,139,517,85,554,58.7C590.8,32,628,32,665,58.7C701.5,85,738,139,775,160C812.3,181,849,171,886,144C923.1,117,960,75,997,96C1033.8,117,1071,203,1108,208C1144.6,213,1182,139,1218,128C1255.4,117,1292,171,1329,197.3C1366.2,224,1403,224,1422,224L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
        <path class="flipped" d="M0,224L18.5,197.3C36.9,171,74,117,111,106.7C147.7,96,185,128,222,165.3C258.5,203,295,245,332,250.7C369.2,256,406,224,443,181.3C480,139,517,85,554,58.7C590.8,32,628,32,665,58.7C701.5,85,738,139,775,160C812.3,181,849,171,886,144C923.1,117,960,75,997,96C1033.8,117,1071,203,1108,208C1144.6,213,1182,139,1218,128C1255.4,117,1292,171,1329,197.3C1366.2,224,1403,224,1422,224L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
      </svg>      
      <!-- Snare Volume -->
      <div id="snare-vol"></div>
      <div class="center">volume</div>
    </div>

  <!-- Perc (Channel 4) -->
    <div id="perc" class="channel module sm-hide">
      <div class="channel-label">perc</div>
      <!-- Perc envelope -->
      <div class="envelope center">
        <div class="flex-center">
          <div id="perc-attack" class="cc6"></div>
          <div id="perc-env" class="my-auto env-display"></div>
          <div id="perc-release" class="cc7"></div>
        </div>
        <div class="center env-label">
          <img src="img/left-arrow-up.svg" width="15"> 
          attack &nbsp; decay 
          <img src="img/right-arrow.svg" width="15">
        </div>
      </div>
      <svg class="divider first-divider" transform="rotate(180)" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 60 1440 607">
        <path d="M0,32L18.5,58.7C36.9,85,74,139,111,160C147.7,181,185,171,222,144C258.5,117,295,75,332,74.7C369.2,75,406,117,443,133.3C480,149,517,139,554,112C590.8,85,628,43,665,58.7C701.5,75,738,149,775,181.3C812.3,213,849,203,886,176C923.1,149,960,107,997,112C1033.8,117,1071,171,1108,186.7C1144.6,203,1182,181,1218,170.7C1255.4,160,1292,160,1329,165.3C1366.2,171,1403,181,1422,186.7L1440,192L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
        <path class="flipped" d="M0,32L18.5,58.7C36.9,85,74,139,111,160C147.7,181,185,171,222,144C258.5,117,295,75,332,74.7C369.2,75,406,117,443,133.3C480,149,517,139,554,112C590.8,85,628,43,665,58.7C701.5,75,738,149,775,181.3C812.3,213,849,203,886,176C923.1,149,960,107,997,112C1033.8,117,1071,171,1108,186.7C1144.6,203,1182,181,1218,170.7C1255.4,160,1292,160,1329,165.3C1366.2,171,1403,181,1422,186.7L1440,192L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
      </svg>          
      <!-- Perc Timbre Controls -->
      <div class="flex-around first-row">
        <div class="center" style="width:50%">
          <div id="perc-freq" class="mx-auto"></div>
          <div>ƒreq</div>
        </div>
        <div class="center my-auto" style="width:50%">
          <div id="perc-detune" class="mx-auto"></div>
          <div>detune</div>
        </div>
      </div>
      <div class="flex-center">
        <div class="center" style="width:40%">
          <div id="perc-dist" class="mx-auto"></div>
          <div>fold</div>
        </div>
        <div class="center" style="width:40%">
          <div id="perc-oct" class="mx-auto"></div>
          <div>FM</div>
        </div>
      </div>
      <svg class="divider second-divider" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 50 1440 607">
        <path fill="#0099ff" fill-opacity="1" d="M0,224L18.5,197.3C36.9,171,74,117,111,106.7C147.7,96,185,128,222,165.3C258.5,203,295,245,332,250.7C369.2,256,406,224,443,181.3C480,139,517,85,554,58.7C590.8,32,628,32,665,58.7C701.5,85,738,139,775,160C812.3,181,849,171,886,144C923.1,117,960,75,997,96C1033.8,117,1071,203,1108,208C1144.6,213,1182,139,1218,128C1255.4,117,1292,171,1329,197.3C1366.2,224,1403,224,1422,224L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
        <path class="flipped" fill="#0099ff" fill-opacity="1" d="M0,224L18.5,197.3C36.9,171,74,117,111,106.7C147.7,96,185,128,222,165.3C258.5,203,295,245,332,250.7C369.2,256,406,224,443,181.3C480,139,517,85,554,58.7C590.8,32,628,32,665,58.7C701.5,85,738,139,775,160C812.3,181,849,171,886,144C923.1,117,960,75,997,96C1033.8,117,1071,203,1108,208C1144.6,213,1182,139,1218,128C1255.4,117,1292,171,1329,197.3C1366.2,224,1403,224,1422,224L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"></path>
      </svg>      
      <!-- Perc Pattern Controls -->
      <div class="step-control center">
        <input id="perc-length" type="number" value="32" min="3" max="32">
        <label>seq length</label>
      </div>
      <div class="left-label flex">
        <img class="left-arrow" src="img/left-arrow.svg">
        <div class="left-text">pattern density</div>
      </div>
      <div class="patt-wrap flex-around">
        <div id="perc-thresh"></div>
        <div class="patt-container">
          <div id="perc-patt" class="absolute"></div>
          <svg class="pattern-overlay"  height="100" width="130">
            <rect id="perc-line" class="one" height="25" width="130" x="0" y="0"/>
            <rect id="perc-line2" class="two" height="12.5" width="130" x="0" y="0"/>
            <rect id="perc-line3" class="three" height="75" width="130" x="0" y="25"/>
          </svg>
        </div>
        <div id="perc-accent"></div>
      </div>
      <div class="right-label">
        <label>accent density <img src="img/right-arrow.svg" width="15"></label>
      </div>
      <div class="flex-center">
        <div id="perc-rand" class="my-auto"></div>
        <div class="random-label smaller">randomize pattern</div>
      </div>
      <svg class="divider third-divider" transform="rotate(180)" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 607">
        <path d="M0,64L16,74.7C32,85,64,107,96,117.3C128,128,160,128,192,133.3C224,139,256,149,288,170.7C320,192,352,224,384,218.7C416,213,448,171,480,138.7C512,107,544,85,576,112C608,139,640,213,672,240C704,267,736,245,768,229.3C800,213,832,203,864,181.3C896,160,928,128,960,128C992,128,1024,160,1056,149.3C1088,139,1120,85,1152,74.7C1184,64,1216,96,1248,117.3C1280,139,1312,149,1344,160C1376,171,1408,181,1424,186.7L1440,192L1440,320L1424,320C1408,320,1376,320,1344,320C1312,320,1280,320,1248,320C1216,320,1184,320,1152,320C1120,320,1088,320,1056,320C1024,320,992,320,960,320C928,320,896,320,864,320C832,320,800,320,768,320C736,320,704,320,672,320C640,320,608,320,576,320C544,320,512,320,480,320C448,320,416,320,384,320C352,320,320,320,288,320C256,320,224,320,192,320C160,320,128,320,96,320C64,320,32,320,16,320L0,320Z"></path>
        <path class="flipped" d="M0,64L16,74.7C32,85,64,107,96,117.3C128,128,160,128,192,133.3C224,139,256,149,288,170.7C320,192,352,224,384,218.7C416,213,448,171,480,138.7C512,107,544,85,576,112C608,139,640,213,672,240C704,267,736,245,768,229.3C800,213,832,203,864,181.3C896,160,928,128,960,128C992,128,1024,160,1056,149.3C1088,139,1120,85,1152,74.7C1184,64,1216,96,1248,117.3C1280,139,1312,149,1344,160C1376,171,1408,181,1424,186.7L1440,192L1440,320L1424,320C1408,320,1376,320,1344,320C1312,320,1280,320,1248,320C1216,320,1184,320,1152,320C1120,320,1088,320,1056,320C1024,320,992,320,960,320C928,320,896,320,864,320C832,320,800,320,768,320C736,320,704,320,672,320C640,320,608,320,576,320C544,320,512,320,480,320C448,320,416,320,384,320C352,320,320,320,288,320C256,320,224,320,192,320C160,320,128,320,96,320C64,320,32,320,16,320L0,320Z"></path>
      </svg>            
      <!-- Perc Volume -->
      <div id="perc-vol"></div>
      <div class="center">volume</div>
    </div>
  </div>

  <!-- ToneJS CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.38/Tone.js"></script>
  <!-- NexusUI CDN -->
  <script src="https://cdn.jsdelivr.net/npm/nexusui@2.0.13/dist/NexusUI.js"></script>
  
  <!-- Main script -->
  <script src="js/main.js"></script>
  <!-- UI components -->
  <script src="js/components.js"></script>

  <script id="nav-controls">
    let buttons = document.querySelectorAll('.nav-button');
    buttons.forEach(button => {
      button.onclick = () => {
        buttons.forEach(box => {
          box.classList.remove('nav-active')
          box.classList.add('nav-inactive')
          document.querySelector(box.dataset.target).classList.add('sm-hide')
        })
        button.classList.remove('nav-inactive')        
        button.classList.add('nav-active')
        document.querySelector(button.dataset.target).classList.remove('sm-hide')
      }
    })
  </script>
  <script id="midi-api">
    		// Request MIDI access
		navigator.requestMIDIAccess()
			.then(onMIDISuccess, onMIDIFailure);
		// Note failure
		function onMIDIFailure() {
			console.log('Could not access your MIDI devices.');
		}
		// On success, set up listeners
		function onMIDISuccess(midiAccess) {
			for (var input of midiAccess.inputs.values()) {
				input.onmidimessage = getMIDIMessage;
			}
    }
    
    		// When MIDI message received => update UI, update uniforms    
		getMIDIMessage = (midiMessage) => {
			console.log(midiMessage.data)
			// midiMessage.data = [msg-type (control=176), target (cc#), value (0-127)]
			let data = midiMessage.data;
			
			// Look for CC messages specifically (data[0] == 176)
			// Program change on (data[0] == 192)
			if (data[0] == 176 || data[0] == 192) {
				// SLIDER CHANGE MESSAGES
				if (data[1] <= 15) {
					// Get the CC number
          let element = getTarget(data[1]);
          // Scale the value
          let val = Nexus.scale(data[2], 0, 127, element.min, element.max)

          console.log(element)
					// Set the new slider value
					element.value = val;
				} 
			}
    }
    
    function getTarget(index) {
      if (index == 0) {
        return kick_atk;
      } else if (index == 1) {
        return kick_release;
      } else if (index == 2) {
        return hats_atk;
      } else if (index == 3) {
        return hats_release;
      } else if (index == 4) {
        return snare_atk;
      } else if (index == 5) {
        return snare_release;
      } else if (index == 6) {
        return perc_atk;
      } else if (index == 7) {
        return perc_release;
      } 
      else if (index == 8) {
        return kick_cutoff
      } else if (index == 9) {
        return kick_dist
      } else if (index == 10) {
        return hats_detune;
      } else if (index == 11) {
        return hats_harm;
      } else if (index == 12) {
        return snare_cutoff;
      } else if (index == 13) {
        return snare_res;
      } else if (index == 14) {
        return perc_tune;
      } else if (index == 15) {
        return perc_dist;
      }
    }
  </script>
</body>
</html>